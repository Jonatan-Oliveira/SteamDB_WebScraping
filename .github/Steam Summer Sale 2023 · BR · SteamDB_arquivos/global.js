(function(){"use strict";let A=!1,b=[],S=[],y;window.SteamDB={FollowedApps:new Set,IgnoredApps:new Set,OwnedApps:new Set,WishedApps:new Set,ExtensionUserdataLoaded:[e=>{const t=typeof $=="function"&&typeof $.fn=="object"&&typeof $.fn.dataTable=="function";let n=t?[]:document.querySelectorAll(".app"),i=t?[]:document.querySelectorAll(".package");t&&($($.fn.dataTable.tables()).each(function(){const r=$(this).DataTable().table();n=r.rows(".app").nodes().reduce(function(o,s){return o.push(s),o},n),i=r.rows(".package").nodes().reduce(function(o,s){return o.push(s),o},i)}),n.length===0&&document.body.classList.contains("page-calculator")&&(n=document.querySelectorAll(".app")));const c=[],u=[];for(const r of n){const o=+r.dataset.appid,s=c[o];s?s.push(r):c[o]=[r]}n=null;for(const r of i){const o=+r.dataset.subid,s=u[o];s?s.push(r):u[o]=[r]}if(i=null,e.rgFollowedApps){window.SteamDB.FollowedApps=new Set(e.rgFollowedApps);for(const r of e.rgFollowedApps){const o=c[r];if(o)for(const s of o)s.classList.add("followed")}}if(e.rgWishlist){window.SteamDB.WishedApps=new Set(e.rgWishlist);for(const r of e.rgWishlist){const o=c[r];if(o)for(const s of o)s.classList.add("wished")}}if(e.rgAppsInCart)for(const r of e.rgAppsInCart){const o=c[r];if(o)for(const s of o)s.classList.add("cart")}if(e.rgOwnedApps){window.SteamDB.OwnedApps=new Set(e.rgOwnedApps);for(const r of e.rgOwnedApps){const o=c[r];if(o)for(const s of o)s.classList.add("owned")}}if(e.rgIgnoredApps)for(let r of Object.keys(e.rgIgnoredApps)){r=+r,window.SteamDB.IgnoredApps.add(r);const o=c[r];if(o)for(const s of o)s.classList.add("ignored")}if(u.length>0){if(e.rgPackagesInCart)for(const r of e.rgPackagesInCart){const o=u[r];if(o)for(const s of o)s.classList.add("cart")}if(e.rgOwnedPackages)for(const r of e.rgOwnedPackages){const o=u[r];if(o)for(const s of o)s.classList.add("owned")}}}],EnhanceLazyLoadedApps:e=>{const t=e.querySelectorAll(".app");for(const n of t){const i=+n.dataset.appid;window.SteamDB.FollowedApps.has(i)&&n.classList.add("followed"),window.SteamDB.WishedApps.has(i)&&n.classList.add("wished"),window.SteamDB.OwnedApps.has(i)&&n.classList.add("owned"),window.SteamDB.IgnoredApps.has(i)&&n.classList.add("ignored")}window.SteamDB.BindHover(e)},BindHover:()=>{},HideHoverIfAny:()=>{},Alert:(e,t=null)=>{const n=document.createElement("toast-notification");return t!==null&&(n.title=t),n.body=e,document.querySelector("#js-notifications").append(n),n},Storage:{Get:function(e){try{return window.localStorage.getItem(e)}catch{return null}},Set:function(e,t){try{window.localStorage.setItem(e,t)}catch{}},Remove:function(e){try{window.localStorage.removeItem(e)}catch{}}},LazyLoad:function(e,t){if(!("IntersectionObserver"in window)){t();return}y||(y=new window.IntersectionObserver(n=>{n.forEach(i=>{i.isIntersecting&&(y.unobserve(i.target),i.target.dispatchEvent(new Event("lazyload")))})})),y.observe(e),e.addEventListener("lazyload",t,{once:!0})},RequirePageScreenshotViewer:function(e,t=!1){if(t){for(let n=0;n<S.length;n++)S[n](e);S=[],window.SteamDB.RequirePageScreenshotViewer=n=>n(e)}else S.push(e)},RequireHighstock:function(e){if(window.Highcharts)return e();if(b.push(e),A)return;A=!0;const t=document.createElement("script");t.nonce=document.querySelector("script[nonce]").nonce,t.src="/static/js/vendor/highstock.js?v=5592baf4459be41a",t.integrity="sha512-VZK69EWb5Br5eYMt/eZLyEpeDm+ZZswtQI9pcwXMfyJaw8ZOUB74fQUHYFs4njhDnhxcrsK4CAhq+otLrttdWg==",t.async=!0,t.addEventListener("load",function(){window.Highcharts.setOptions({accessibility:{enabled:!1},chart:{animation:!1,zoomType:"x",backgroundColor:"transparent",spacing:[5,0,15,0],style:{fontSize:"16px",fontFamily:"inherit"}},title:{style:{color:"var(--body-color)"}},yAxis:{gridLineColor:"rgba(180, 180, 180, 0.2)",labels:{style:{color:"var(--muted-color)"}}},xAxis:{lineColor:"var(--border-color)",tickColor:"var(--border-color)",crosshair:{width:30,color:"rgba(180, 180, 180, 0.2)"},labels:{style:{color:"var(--muted-color)"}}},legend:{itemHoverStyle:{color:"var(--link-color)"},itemHiddenStyle:{color:"var(--border-color)"},itemStyle:{color:"var(--body-color)",fontSize:"16px",fontWeight:400}},plotOptions:{series:{animation:!1,dataGrouping:{enabled:!1},states:{hover:{lineWidthPlus:0}}}},credits:{text:"data by SteamDB.info (powered by highcharts.com)",position:{x:0,y:-3},style:{fontSize:"12px",color:"var(--muted-color)"}},exporting:{buttons:{contextButton:{symbol:"url(/static/img/download.svg)",symbolSize:24,symbolX:26,symbolY:24,menuItems:["downloadCSV","downloadXLS"],theme:{fill:"none",r:3,states:{hover:{fill:"var(--border-color-2)"},select:{fill:"var(--border-color)"}}}}}},navigation:{menuStyle:{borderRadius:"6px",borderColor:"var(--border-color)",background:"var(--tooltip-bg)",boxShadow:"-8px -8px 24px rgba(149, 157, 165, 0.2)"},menuItemStyle:{color:"var(--body-bg-color)",transition:"none",fontSize:"14px"}},rangeSelector:{inputEnabled:!1,labelStyle:{color:"var(--body-color)"},buttonTheme:{width:36,fill:"none",r:3,style:{color:"var(--link-color)",fontWeight:"bold"},states:{hover:{fill:"var(--border-color-2)",style:{color:"var(--link-color-hover)"}},select:{fill:"var(--border-color)",style:{color:"var(--body-color)"}},disabled:{color:"var(--muted-color)"}}}},navigator:{handles:{backgroundColor:"var(--border-color-2)",borderColor:"var(--link-color)"},xAxis:{gridLineColor:"var(--border-color)",labels:{style:{color:"var(--muted-color)",opacity:1}}},series:{lineWidth:2},outlineColor:"var(--border-color)"},tooltip:{shared:!0,split:!1,shadow:!1,borderWidth:0,borderRadius:6,headerFormat:"{point.key} UTC<br/>",backgroundColor:"var(--tooltip-bg)",style:{fontSize:"14px",color:"var(--body-bg-color)"}}});for(let n=0;n<b.length;n++)b[n]();b=[],A=!1}),document.head.appendChild(t)}};const L=(e,t,n)=>{document.querySelectorAll(e).forEach(i=>{n?i.classList.add(t):i.classList.remove(t)})},p=(e,t,n)=>L(`.app[data-appid="${e}"]`,t,n),v=(e,t,n)=>L(`.package[data-subid="${e}"]`,t,n),B=(e,t,n)=>L(`.bundle[data-bundleid="${e}"]`,t,n),C=e=>{if(e.response.success){if(e.request.appid>0){const t=e.request.appid;switch(e.request.contentScriptQuery){case"StoreWishlistAdd":window.SteamDB.WishedApps.add(t),p(t,"wished",!0);break;case"StoreWishlistRemove":window.SteamDB.WishedApps.delete(t),p(t,"wished",!1);break;case"StoreFollow":window.SteamDB.FollowedApps.add(t),p(t,"followed",!0);break;case"StoreUnfollow":window.SteamDB.FollowedApps.delete(t),p(t,"followed",!1);break;case"StoreIgnore":window.SteamDB.IgnoredApps.add(t),p(t,"ignored",!0);break;case"StoreUnignore":window.SteamDB.IgnoredApps.delete(t),p(t,"ignored",!1);break;case"Watch":p(t,"watched",!0);break;case"Unwatch":p(t,"watched",!1);break}}else if(e.request.subid>0){const t=e.request.subid;switch(e.request.contentScriptQuery){case"StoreAddToCart":v(t,"cart",!0);break;case"StoreAddFreeLicense":v(t,"owned",!0);break;case"Watch":v(t,"watched",!0);break;case"Unwatch":v(t,"watched",!1);break}}else if(e.request.bundleid>0){const t=e.request.bundleid;switch(e.request.contentScriptQuery){case"Watch":B(t,"watched",!0);break;case"Unwatch":B(t,"watched",!1);break}}}};if("BroadcastChannel"in window){let e=null;try{e=new BroadcastChannel("steamdb-extension"),e.addEventListener("message",t=>{t&&t.data&&t.data.type==="steamdb:extension-response"&&C(t.data)})}catch{}window.addEventListener("message",t=>{if(!(!t||!t.data)&&t.origin===window.location.origin)if(t.data.type==="steamdb:extension-loaded"){for(const n of window.SteamDB.ExtensionUserdataLoaded)n(t.data.data);window.SteamDB.ExtensionUserdataLoaded=[]}else if(t.data.type==="steamdb:extension-error"){try{if(window.sessionStorage.getItem("extension_error_hidden")&&location.pathname!=="/freepackages/")return}catch{}const n=window.SteamDB.Alert(t.data.error,"Extension error");if(typeof InstallTrigger<"u"){const c=document.createElement("div");c.textContent="If you use Firefox containers, extension is not compatible with it.",n.append(c)}const i=document.createElement("a");i.className="btn btn-sm btn-primary",i.href="https://store.steampowered.com/login/",i.textContent="Sign in on the Steam Store",n.append(i),n.addEventListener("toast-close",()=>{try{window.sessionStorage.setItem("extension_error_hidden","1")}catch{}})}else t.data.type==="steamdb:extension-response"&&(e!==null&&e.postMessage(t.data),C(t.data),(!t.data.response||!t.data.response.success)&&location.pathname!=="/freepackages/"&&(window.SteamDB.Alert(`Something went wrong.
`+(t.data.response&&t.data.response.error||"Unknown error. Are you logged in on the Steam store?"),"Extension error"),console.error(t.data.response)))})}const T=e=>{const t=[];if(e.forEach((n,i)=>{const c=i.toLowerCase();(c==="__cf_chl_captcha_tk__"||c==="__cf_chl_jschl_tk__"||c==="ref"||c==="fbclid"||c.startsWith("utm_"))&&t.push(i)}),t.length>0){for(const n of t)e.delete(n);window.history.replaceState(null,null,Array.from(e).length?`${location.pathname}?${e}`:location.pathname)}},w=document.querySelector(".header"),l=document.querySelector(".header-menu-container"),E=document.querySelector("#js-header-hamburger"),I=document.querySelector(".account-menu"),U=document.querySelector(".header-user-avatar");U&&U.addEventListener("click",e=>{e.preventDefault(),I.hidden=!I.hidden}),E.addEventListener("click",function(e){l.hidden=!l.hidden,l.hidden||(l.querySelector(".header-menu").focus(),w.classList.remove("header-search-focus"))}),l.addEventListener("click",function(e){e.target.className===l.className&&(l.hidden=!0)});const D=document.getElementById("js-header-form"),f=D.querySelector(".field");if(document.addEventListener("keydown",e=>{if(e.key==="Escape"){if(document.documentElement.classList.contains("js-screenshots-shown"))return;l.hidden?w.classList.remove("header-search-focus"):(l.hidden=!0,E.focus())}e.ctrlKey||e.metaKey||["INPUT","TEXTAREA","SELECT","BUTTON"].includes(e.target.tagName)||(e.key==="/"||e.key==="s"?(e.preventDefault(),f.focus()):e.key==="m"&&E.click())}),D){D.addEventListener("submit",function(o){const s=f.value.replace(/^\s+|\s+$/g,"");let a=s.match(/^([0-9]{1,7})$/);if(a!==null){window.location=`/app/${a[0]}/`,o.preventDefault();return}if(a=s.match(/(7656119[0-9]{10})/),a!==null){window.location=`/calculator/${a[1]}/`,o.preventDefault();return}if(a=s.match(/(?:id|profiles)\/([\d\w-]+)/),a!==null){window.location=`/calculator/?player=${a[1]}`,o.preventDefault();return}a=s.match(/(app|sub|bundle|depot|dlc)\/([0-9]{1,8})/),a!==null&&(a[1]==="dlc"&&(a[1]="app"),window.location=`/${a[1]}/${a[2]}/`,o.preventDefault())},!1);const e=document.getElementById("js-search-suggestions"),t=document.getElementById("js-search-tips");let n=0,i,c;const u=()=>{n=0;const o=document.body.dataset.steamCdn,s=new URLSearchParams;s.append("x-algolia-agent","SteamDB Autocompletion"),s.append("x-algolia-application-id","94HE6YATEI"),s.append("x-algolia-api-key","338033d8e504a8a3f98452c637d713b9"),s.append("hitsPerPage",15),s.append("attributesToSnippet",null),s.append("attributesToHighlight","name"),s.append("attributesToRetrieve","objectID,lastUpdated"),s.append("query",i),c&&c.abort(),c=new AbortController,fetch("https://94he6yatei-dsn.algolia.net/1/indexes/steamdb/?"+s.toString(),{signal:c.signal}).then(a=>a.json()).then(a=>{c=null;let g=e.querySelector(".focus"),k=-1;if(g&&(k=+g.dataset.appid),t.hidden=!0,e.replaceChildren(),window.SteamDB.HideHoverIfAny(),!a.nbHits){const m=document.createElement("span");m.innerText="No results found.",e.appendChild(m);return}for(const m of a.hits){const h=+m.objectID,d=document.createElement("a");d.classList.add("app"),d.dataset.appid=h,d.href=`/app/${h}/`,d.innerHTML=m._highlightResult.name.value,window.SteamDB.OwnedApps.has(h)?d.classList.add("owned"):window.SteamDB.WishedApps.has(h)?d.classList.add("wished"):window.SteamDB.FollowedApps.has(h)&&d.classList.add("followed"),k===h&&(k=-1,d.classList.add("focus"));const x=document.createElement("img");x.alt="",x.src=`${o}steam/apps/${h}/capsule_sm_120.jpg?t=${m.lastUpdated}`,d.prepend(x),e.appendChild(d)}k>-1&&(g=e.firstElementChild,g&&g.classList.add("focus")),window.SteamDB.BindHover(e)}).catch(()=>{})},r=()=>{w.classList.add("header-search-focus"),l.hidden=!0};f.addEventListener("keydown",function(o){if(o.key==="ArrowUp"||o.key==="ArrowDown"){o.preventDefault();const s=e.querySelector(".focus");let a;o.key==="ArrowUp"?(s&&(a=s.previousSibling),a||(a=e.lastElementChild)):(s&&(a=s.nextSibling),a||(a=e.firstElementChild)),a&&(s&&s.classList.remove("focus"),a.classList.add("focus"))}else if(o.key==="Enter"){if(o.ctrlKey){const a=new URLSearchParams;a.append("query",i),window.location.href=`/instantsearch/?${a.toString()}`,o.preventDefault();return}const s=e.querySelector(".focus");s&&(s.click(),o.preventDefault())}else o.key==="Escape"&&f.blur()}),f.addEventListener("input",function(){r();const o=this.value;if(!o||o.length>200){e.replaceChildren(),t.hidden=!1,window.SteamDB.HideHoverIfAny();return}i!==o&&(i=o,!n&&(n=setTimeout(()=>u(),200)))}),document.querySelector(".header-search-close").addEventListener("click",()=>{w.classList.remove("header-search-focus")}),document.querySelector(".header-search-side-close").addEventListener("click",()=>{w.classList.remove("header-search-focus")}),document.querySelector(".header-search-mobile").addEventListener("click",()=>{r(),f.focus()}),f.addEventListener("focus",r)}if(window.location.hostname==="steamdb.info"){const e=new URLSearchParams(location.search);T(e)}"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js",{scope:"/"}).catch(e=>{console.error(e)})})();
